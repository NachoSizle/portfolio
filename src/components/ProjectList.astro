---
export interface Props {
  projects: any[];
}
import ProjectCard from './ProjectCard.astro';
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const { projects } = Astro.props;
const totalProjects = projects.length;
---

<section class="relative m-6 mb-12 mt-0 bg-transparent overflow-hidden" aria-labelledby="projects-section" role="region">
  <!-- Header con animaciÃ³n sutil -->
  <div class="text-center mb-12 relative z-10">
    <!-- Anchor compatible con el nav: #projects (in-page) -->
    <a id="projects" class="sr-only" />
    <h2 id="projects-section" class="text-4xl font-extrabold tracking-tight sm:text-5xl md:text-6xl text-balance md:leading-20 mb-4 select-none">
      {t('projects.title')} <span class="text-primary">{t('projects.titleHighlight')}</span>
    </h2>
    <p class="text-lg text-neutral-600 dark:text-neutral-300 max-w-2xl mx-auto select-none" set:html={t('projects.subtitle')} />
  </div>

  <!-- Lista de proyectos usando ProjectCard con sticky scroll -->
  <ul class="space-y-0" role="list">
    {projects.map((project: any, index: number) => (
      <ProjectCard
        project={project}
        index={index}
        total={totalProjects}
      />
    ))}
  </ul>

  <!-- Call to action al final -->
  <div class="mt-16 text-center">
    <div class="w-full sm:max-w-xs inline-flex items-center justify-center gap-3 px-6 py-3 bg-gradient-to-r from-primary/10 to-emerald-500/10 rounded-full border border-primary/20 dark:border-emerald-500/20">
      <a 
        href="https://github.com/NachoSizle" 
        target="_blank" 
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 text-sm font-semibold text-primary hover:text-primary/80 
               transition-colors duration-200 select-none"
        aria-label={t('projects.viewMore')}
      >
        <span class="text-sm font-medium text-neutral-700 dark:text-neutral-300">
          {t('projects.likeWhat')}
        </span>
        {t('projects.viewMore')}
      </a>
    </div>
  </div>
</section>

<style>
  /* El componente ProjectCard ya maneja el sticky scroll y las animaciones */
</style>
