---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import ProjectList from '../components/ProjectList.astro';
import Hero from '../components/Hero.astro';
import AboutSection from '../components/AboutSection.astro';
const projects = await getCollection('projects');
---

<BaseLayout title="Portfolio de Nacho Sizle" description="Portfolio de Nacho Sizle, desarrollador de software. Proyectos, artículos y más.">
	<Hero />
	<AboutSection />
	<ProjectList projects={projects} />
</BaseLayout>

<script>
	// Detectar idioma del navegador solo en la primera visita
	const hasVisited = sessionStorage.getItem('lang-detected');
	if (!hasVisited) {
		const browserLang = navigator.language.split('-')[0];
		if (browserLang === 'en') {
			sessionStorage.setItem('lang-detected', 'true');
			window.location.href = '/portfolio/en/';
		} else {
			sessionStorage.setItem('lang-detected', 'true');
		}
	}
</script>
